{% comment %} @SPK@include("partials/mainhead.html") {% endcomment %}
{% include "../../partials/mainhead.html"%}

<!-- ✅ Quill v2 CSS (native table support built-in) -->
<link href="https://cdn.jsdelivr.net/npm/quill@2.0.0/dist/quill.snow.css" rel="stylesheet">

<style>
    .form-container {
        max-width: 700px;
        margin: 50px auto;
        background: #f8f9fa;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .quill-editor-container {
        height: 300px;
        border: 1px solid #ced4da;
        border-radius: 6px;
        background-color: white;
    }

    .quill-editor-container .ql-editor {
        min-height: 250px;
        max-height: 250px;
        overflow-y: auto;
    }

    .ql-toolbar {
        border-radius: 6px 6px 0 0;
    }

    .ql-font-arial { font-family: Arial, sans-serif; }
    .ql-font-times-new-roman { font-family: "Times New Roman", serif; }
    .ql-font-sans-serif { font-family: sans-serif; }
    .ql-font-serif { font-family: serif; }
    .ql-font-monospace { font-family: monospace; }
</style>
</head>

<body>
{% include "../../partials/switcher.html" %}
<div class="page">
    {% include "../../partials/header.html"%}
    {% include "../../partials/sidebar.html" %}

    <div class="main-content app-content">
        <div class="container">
            <div class="form-container">
                <h2 class="text-center mb-4">Add Government Job</h2>

                <form id="jobForm">
                    <div class="mb-3">
                        <label class="form-label">Job Title</label>
                        <input type="text" name="title" class="form-control" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Organization</label>
                        <select name="organization" id="organizationSelect" class="form-control">
                            <option value="">Select an Organization (optional)</option>
                        </select>
                        <button type="button" id="createOrganizationBtn" class="btn btn-link">Create Organization</button>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Department</label>
                        <select name="department" id="departmentSelect" class="form-control">
                            <option value="">Select a Department (optional)</option>
                        </select>
                        <button type="button" id="createDepartmentBtn" class="btn btn-link">Create Department</button>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Position</label>
                        <select name="position" id="positionSelect" class="form-control" multiple>
                            <option value="">Select a Position (optional)</option>
                        </select>
                        <small class="text-muted">Hold Ctrl (Windows) or Cmd (Mac) to select multiple positions.</small>
                        <button type="button" id="createPositionBtn" class="btn btn-link">Create Position</button>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Location</label>
                        <input type="text" name="location" class="form-control">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Deadline</label>
                        <input type="date" name="deadline" class="form-control">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Official Link</label>
                        <input type="url" name="official_link" class="form-control">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">PDF (optional)</label>
                        <input type="file" name="pdf" class="form-control">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Job Description</label>
                        <div id="quill-editor" class="quill-editor-container"></div>
                        <textarea name="description" id="descriptionInput" style="display:none;"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary w-100">Submit</button>
                </form>

                <div id="loader" class="text-center mt-4" style="display: none;">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2">Submitting job...</p>
                </div>

                <div class="mt-4" id="message"></div>
            </div>
        </div>
    </div>

    {% include "../../partials/headersearch_modal.html"%}
    {% include "../../partials/footer.html" %}
</div>

{% include "../../partials/commonjs.html"%}
{% include "../../partials/custom_switcherjs.html"%}

    <script src="https://cdn.quilljs.com/1.3.7/quill.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathquill/0.10.1/mathquill.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const toolbarOptions = [
        [{ 'font': [] }, { 'size': [] }],
        [{ 'header': [1, 2, 3, false] }],
        ['bold', 'italic', 'underline', 'strike'],
        ['blockquote', 'code-block'],
        [{ 'list': 'ordered' }, { 'list': 'bullet' }],
        [{ 'indent': '-1' }, { 'indent': '+1' }],
        [{ 'align': [] }],
        [{ 'color': [] }, { 'background': [] }],
        ['link', 'image', 'video'],
        ['table'],   // ✅ Native Quill 2 table button
        ['clean']
    ];

    const quill = new Quill('#quill-editor', {
        theme: 'snow',
        modules: {
            toolbar: { container: toolbarOptions },
            table: true   // ✅ Enable native table support
        }
    });

    const form = document.getElementById("jobForm");
    const hiddenDescInput = document.getElementById("descriptionInput");
    form.addEventListener("submit", function (e) {
        hiddenDescInput.value = quill.root.innerHTML;
    });
});
</script>

<script src="../../../../static/assets/js/custom.js"></script>
<script src="../../../../static/Js/govt_jobs/govt_job_form.js"></script>
</body>
</html>
